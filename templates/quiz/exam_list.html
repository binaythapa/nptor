{% extends 'quiz/base.html' %}
{% block content %}

<h2 class="subtitle">Available Exams</h2>

{% for row in exam_rows %}
  <div class="box">
    <h3 class="title is-5">{{ row.exam.title }}</h3>

    <p class="is-size-7 has-text-grey">
      Level {{ row.exam.level }} Â· {{ row.exam.question_count }} questions Â· {{ row.exam.duration_seconds }} sec
    </p>

    <div class="buttons mt-2">

      {% if row.active_attempt %}
        <a class="button is-warning"
           href="{% url 'quiz:exam_take' row.active_attempt.id %}">
          Resume
        </a>

      {% elif row.is_locked %}
        <button class="button is-light" disabled>
          ðŸ”’ Locked
        </button>
        <span class="is-size-7 has-text-grey">
          {{ row.locked_reasons|join:", " }}
        </span>

      {% else %}
        <a class="button is-primary"
           href="{% url 'quiz:exam_start' row.exam.id %}">
          Start
        </a>
      {% endif %}

      <a class="button is-link is-light"
         href="{% url 'quiz:mock_exam_start' row.exam.id %}">
        Mock
      </a>
    </div>
  </div>
{% empty %}
  <p>No exams available.</p>
{% endfor %}

{% endblock %}
